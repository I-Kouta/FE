### 9.1 データベース方式

---
1.関係モデルとその実装である関係DBの対応に関する記述

- A.**関係は、表に対応付けられる**  
関係モデルはデータの関係を数学的な集合論と述語論によって表現するモデルで、関係DBは関係モデルをコンピュータ上で実装したもの

<img width="500" alt="" src="./images/関係モデル.png">

- 属性も列も、左から右に順序付けられる  
関係モデルは数学的モデルなので属性には順序の概念はないが、関係DBはデータを2次元の表で管理するため列順が生じる

- タプルも行も、ともに重複しない  
関係モデルのタプルは重複を許さないが、関係DBの場合は関係演算の結果によっては重複行が生じることがある

- 定義域(ドメイン)は、文字型又は文字列型に対応付けられる  
値の取り得る範囲・形式を制限するデータ型に対応する

---
2.関係モデルの属性に関する説明

- A.**関係内の属性の並び順に意味はなく、順番を入れ替えても同じ関係である**  
関係DBにおいて、関係は表、属性は列(カラム)、組(タプル)は行(レコード)に対応する。属性の並び・組の並びに意味はない。並び順が変わっても関係は変わらない

- 関係内の属性の定義域は重複してはならない  
属性が取り得る値の集合のことで、データ型と同じ意味でドメインとも呼ぶ。関係内の2つの属性に整数型などの同じ定義域を設定することを考えると、定義域の重複は問題にならない

- 関係内の2つ以上の属性に、同じ名前を付けることができる  
属性に付ける名前は関係内で一意でなければならない

- 名前をもたない属性を定義することができる  
属性には名前を付けなければならない

---
5.DBMSにおいて、スキーマ(*schema*)を決める機能

- A.**定義機能**  
データの内容・論理構造、記憶形式や編成などDBの構造を記述したもの

- 機密保護機能  
ユーザ認証、アクセス権限、利用ログの記録、暗号化などによってデータを安全に保つ機能

- 障害回復機能  
ロールバック、ロールフォワード、チェックポイント、更新前 / 更新後ログの記録などによってDBを生涯から回復する機能

- 保全機能  
排他制御や参照制約、表制約などによってデータの完全性を保つ機能

---
6.DBMSが3層スキーマアーキテクチャを採用する目的

- A.**データの物理的な格納構造を変更しても、アプリケーションプログラムに影響が及ばないようにする**  
`概念スキーマ` : DB化対象の業務とデータの内容を論理的な構造として記述したもの。関係モデルではER図の作成、表定義、表の正規化が該当する  
`外部スキーマ` : データの利用者からの見方を記述したもの。SQLのビューが外部スキーマに該当する  
`内部スキーマ` : データを記憶装置上にどのような形式で格納するかを記述したもの。ファイル編成やインデックスの設定などが該当する

- 関係演算によって元の表から新たな表を導出し、それが実在しているように見せる  
ビューの目的

- 対話的に使われるSQL文を、アプリケーションプログラムからも使えるようにする  
カーソル操作の目的

- プログラム言語を限定して、アプリケーションプログラムとDBMSを緊密に結合する  
緊密ではなく、分離する目的がある

---
7.DBMSが受け付けたクエリを実行するまでの処理の流れにおいて、該当する処理の組み合わせ

<img width="500" alt="" src="./images/クエリ.png">

- A.**構文解析, 最適化, コード生成**  
`構文解析` : パーサが受け付けたSQLクエリを解析し、内容を解釈する  
`最適化` : クエリを最も効率よく実行できる方法を検討し決定する  
`コード生成` : 決定された方法でDBにアクセスするためのコードを生成する

---
8.SQL文を実行する際に、効率が良いと考えられるアクセス経路を選択する関係DB管理システム(RDBMS)の機能

- A.**オプティマイザ**(*Optimizer*)  
SQL文に対する結果は1つでも、RDBMSの内部ではインデックスの使用有無、結合の順番などからいくつかの実行方法が考えられる。SQL文を処理するために考えられる実行計画を全て検証し、最も効率が良いと予想される実行計画の決定を行う。更に最適な実行方法を決める基準には、アクセスパスに対して付けられた優先順位をもとに選択する`ルールベース`、アクセスする表やインデックスの統計情報をもとに見積もられたコストをもとに計算する`コストベース`の2種類がある

---
9.関係DB(*RelationalDataBase*)のデータ構造の説明

- A.**データを2次元の表によって表現する**  
データ構造を平坦な2次元の表で定義する。表をテーブル、行をレコード(タプル)、列をカラム(フィールド)と呼び、複数の表の関連は主キー同士または主キーと外部キーによって行われる

- 親レコードと子レコードをポインタで結合する  
木構造を使ってデータ構造を表す階層型DBの説明

- タグを用いてデータの構造と意味を表す  
SGMLやHTMLなどのマークアップ言語の説明

- データと手続を一体化(カプセル化)してもつ  
オブジェクト指向におけるクラスの説明

---
11.関係DBの説明

- A.**データを表として表現する。表間は相互の表中の列の値を用いて関連付けられる**

- 属性単位に、属性値とその値をもつレコード格納位置を組にして表現する。索引として利用される  
DBのアクセス効率を向上させるために使用される、インデックスの説明

- レコード間の関係を、ポインタを用いたデータ構造で表現する。木構造の表現に制限される  
階層型DBの説明

- レコード間の関係を、リンクを用いたデータ構造で表現する。木構造や網構造も表現できる  
ネットワーク型DBの説明

---
13.DBを記録媒体にどのように格納するか記述したもの

- A.**内部スキーマ**  
データを記憶装置上にどのような形式で格納するかを記述したもの。`ファイル編成やインデックスの設定`などが該当する

- 概念スキーマ  
DB化対象の業務とデータの内容を論理的な構造として記述したもの。関係モデルではER図の作成、表定義、表の正規化が該当する

- 外部スキーマ(サブスキーマ)  
データの利用者からの見方を記述したもの。SQLのビューが外部スキーマに該当する

---
14.関係データモデルにおいて、属性が取り得る値の集合を意味する用語

- A.**定義域**(*domain*)  
属性がもつデータ型と同じ意味。基本となる整数、文字列、日付等の他に列挙値や非負の整数などを定義域として設定できる。独自のドメインを定義するにはSQLの`create domain`文を使う

- 関係(リレーション)  
表同士の関連を意味する

- 実現値  
レコードや表に格納される個々のデータを意味する

- タプル(組)  
リレーショナルDBにおけるレコード・行を意味する

---
15.データモデルにおいて、データの関係を木構造で表すもの

- A.**階層モデル**  
木構造(階層構造)で表現する

- ERモデル  
実体(エンティティ)と実体のもつ属性(アトリビュート)、実体間の関連(リレーションシップ)を実現する図

- 関係モデル  
データを2次元の表で実現する

- ネットワークモデル  
親(子)レコードがそれぞれ複数のリンクをもち、多対多の関係を網状に表現できる

### 9.2 データベース設計

---
1.関係DBの主キーの性質

- A.**1つの表の中に、主キーの値が同じ行が複数存在することはない**  
一意性制約を説明している。表中の行を一意に識別できる性質を保持するため、主キーの値が同じ行が複数存在することはできない。主キーには非NULL制約も課される

- 主キーとした列に対して検索条件を指定しなければ、行の検索はできない  
主キー以外の列の値を使った検索もできる

- 数値型の列を主キーに指定すると、その列は算術演算の対象としては使えない  
主キー列を集計関数等で計算の対象とすることもできる

- 複数の列からなる主キーを構成することはできない  
1つの属性だけで行の特定ができない場合、複数の属性を組み合わせて複合主キーとすることがある
